<% provide :head_tags do %>
  <meta name='turbolinks-visit-control' content='reload'>
  <script>
    document.addEventListener("DOMContentLoaded", function(){
      initMap(<%=facade.landmark.lat%>, <%=facade.landmark.long%>)
    });
  </script>
<% end %>

<!DOCTYPE html>
<html lang="en">
<head>
  <title>Bootstrap Example</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
</head>
<body>

<div class="container-fluid">
  <div class="container">
    <h1><%= facade.landmark.name %></h1>
    <section class="picture">
      <%= image_tag facade.picture, class: "img-fluid img", style: "display: block; margin-left: auto; margin-right: auto; width: 100%;" %>
    </section>
  </div>

  <div class="container">
    <section class="attributes">
      <p><b>Address: </b> <%= facade.landmark.address %></p>
      <% if facade.landmark.phone_number.nil? %>
        <b>Phone: </b>Not Available</p>
      <% else %>
        <p><b>Phone: </b> <%= facade.landmark.phone_number %></p>
      <% end %>
      <% if facade.landmark.website.nil? %>
        <b>Website: </b>Not Available</p>
      <% else %>
        <p><b>Website: </b> <%= link_to facade.landmark.website, "#{facade.landmark.website}", :target => "_blank" %></p>
      <% end %>
      <p><b>Category: </b> <%= facade.landmark.category.capitalize %></p>
    </section>
  </div>

  <div class="container">
    <section class="add-recordings">
      <% if current_user %>
        <%= button_to "Upload new recording", new_landmark_recording_path(facade.landmark), method: :get, class: 'btn btn-primary' %>
      <% end %>
    </section>
  </div>

  <div class="container">
    <section class="recordings">
      <% unless facade.landmark.recordings.empty? %>
        <h3>Recordings</h3>
        <% facade.landmark.recordings.each do |recording| %>
          <%= render partial: 'shared/audio_player', object: recording %>
        <% end %>
      <% end %>
    </section>
  </div>

  <div class="container">
    <br>
    <section class="map">
      <div id="map"></div>
    </section>
  </div>
</div>

</body>
</html>
